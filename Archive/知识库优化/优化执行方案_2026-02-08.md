# Leo 知识库优化执行方案

> 制定日期：2026-02-08
> 制定者：优化架构师（基于架构分析师报告）
> 版本：v1.0

---

## 执行摘要

### 核心问题诊断

| 问题 | 当前数据 | 影响 |
|------|----------|------|
| **存储膨胀** | 知识库 33GB（应有 <500MB） | Git 性能差，备份缓慢 |
| **数据集混存** | 22GB 数据集 + 大量代码 | 知识库概念混淆 |
| **链接密度低** | 仅 6.1% (23/379) 文件使用双向链接 | 知识孤岛，检索困难 |
| **目录混乱** | 60,801 文件（Projects）+ 48,066 文件（Thesis） | 导航困难 |

### 优化目标

| 指标 | 当前值 | 目标值 | 提升 |
|------|--------|--------|------|
| 知识库大小 | 33GB | <500MB | 98.5% |
| 链接密度 | 6.1% | 30% | 5x |
| 文件数量 | 100,000+ | <500 | 99.5% |

---

## 一、优化方案总览

### 1.1 四阶段路线图

```
┌─────────────────────────────────────────────────────────────────┐
│ 阶段一：紧急修复（Week 1）                                        │
│ ─────────────────────────────────────────────────────────────   │
│ 目标：解决存储膨胀，知识库降至 500MB 级别                          │
│ ─────────────────────────────────────────────────────────────   │
│ □ 数据集分离（22GB）                                             │
│ □ 项目代码分离（10GB+）                                          │
│ □ 创建代码映射文件                                               │
└─────────────────────────────────────────────────────────────────┘
                            ↓
┌─────────────────────────────────────────────────────────────────┐
│ 阶段二：结构优化（Week 2-3）                                      │
│ ─────────────────────────────────────────────────────────────   │
│ 目标：规范目录结构，提升导航效率                                  │
│ ─────────────────────────────────────────────────────────────   │
│ □ Writing 目录重组                                               │
│ □ 技能文件集中管理                                               │
│ □ 创建导航索引文件                                               │
└─────────────────────────────────────────────────────────────────┘
                            ↓
┌─────────────────────────────────────────────────────────────────┐
│ 阶段三：内容增强（Week 4-6，持续）                                │
│ ─────────────────────────────────────────────────────────────   │
│ 目标：提升知识关联密度                                            │
│ ─────────────────────────────────────────────────────────────   │
│ □ 建立自动链接规则                                               │
│ □ 创建 P0 Skills（周复盘、读论文）                                │
│ □ 定期 Inbox 清理流程                                           │
└─────────────────────────────────────────────────────────────────┘
                            ↓
┌─────────────────────────────────────────────────────────────────┐
│ 阶段四：智能升级（Week 7-10，可选）                               │
│ ─────────────────────────────────────────────────────────────   │
│ 目标：MCP 集成，自动化增强                                        │
│ ─────────────────────────────────────────────────────────────   │
│ □ Filesystem/Memory MCP                                         │
│ □ SQLite MCP（习惯追踪）                                         │
│ □ Brave Search MCP（论文搜索）                                   │
└─────────────────────────────────────────────────────────────────┘
```

---

## 二、阶段一：紧急修复（Week 1）⚡

### 2.1 数据集分离方案

| 属性 | 详情 |
|------|------|
| **优先级** | P0 |
| **收益** | 释放 22GB 存储空间 |
| **成本** | 30 分钟 |
| **风险** | 低 - 数据只读，无修改风险 |

**问题识别**：
```
02-Thesis/Experiments/Dataset-for-illegal-buildings-detection-from-satellite/
├── annotations/           # 大量标注文件
├── images/               # 图片数据集
└── ...                   # 数据集文件
```

**执行方案**：

1. **创建外部数据集目录**
   ```
   E:/000/datasets/
   └── illegal-buildings-detection/
       └── (从 02-Thesis 移动过来)
   ```

2. **在知识库中保留引用**
   ```markdown
   # 02-Thesis/Experiments/数据集说明.md

   ## 违建检测数据集

   **数据集位置**：`E:/000/datasets/illegal-buildings-detection/`

   **数据集信息**：
   - 来源：Dataset-for-illegal-buildings-detection-from-satellite
   - 用途：毕业论文实验
   - 格式：...

   **访问方式**：
   - 训练脚本已配置数据集路径
   - 如需重新配置，修改 `config.yaml` 中的 `dataset_path`
   ```

3. **更新配置文件**
   更新 `02-Thesis/claude.md`，添加数据集位置说明

---

### 2.2 项目代码分离方案

| 属性 | 详情 |
|------|------|
| **优先级** | P0 |
| **收益** | 释放 10GB+ 存储空间 |
| **成本** | 2-3 小时 |
| **风险** | 中 - 需要确保映射准确 |

**问题识别**：
- `03-Projects/`：11GB，60,801 文件
- `04-Competitions/`：6.2GB
- 包含大量项目代码、模型、训练输出

**执行方案**：

1. **创建外部代码目录**
   ```
   E:/000/projects-code/
   ├── 50所-路灯检测/
   │   ├── area_calc/
   │   └── test_v2/
   ├── 电信-金融科技/
   │   └── financial_recommendation_system/
   ├── 竞赛-智慧城市/
   └── 红楼梦研究协助/
       └── douyin_scraper/
   ```

2. **创建映射文件**
   ```markdown
   # 08-Projects-Code/PROJECTS-ALIAS.md

   > 项目代码位置映射表

   | 项目名称 | 知识库文档 | 代码位置 | 备注 |
   |----------|-----------|----------|------|
   | 路灯检测去重 | [[03-Projects/中电科50所]] | E:/000/projects-code/50所-路灯检测/ | 面积计算算法 |
   | 金融科技创新大赛 | [[04-Competitions/金融科技]] | E:/000/projects-code/电信-金融科技/ | 推荐系统 |
   | 红楼梦数据抓取 | [[03-Projects/红楼梦研究协助]] | E:/000/projects-code/红楼梦/douyin_scraper/ | 抖音爬虫 |

   ---
   > 注：项目代码与知识库文档分离，便于 Git 管理
   ```

3. **知识库保留内容**
   ```
   03-Projects/
   ├── 中电科50所/
   │   ├── 项目概况.md          # 保留
   │   ├── 会议记录.md          # 保留
   │   ├── 核心算法.md          # 保留
   │   └── README.md            # 保留（指向代码位置）
   └── ...
   ```

---

### 2.3 Writing 目录清理

| 属性 | 详情 |
|------|------|
| **优先级** | P1 |
| **收益** | 模板/报告分离，查找效率提升 |
| **成本** | 30 分钟 |
| **风险** | 低 |

**当前问题**：
- 临时报告文件堆积
- 命名不统一
- 模板与产出混在一起

**新结构**：
```
02-Thesis/Writing/
├── Templates/              # 模板（保持不变）
│   ├── paper-template.md
│   └── experiment-template.md
├── Drafts/                 # 初稿（新建）
│   └── (写作中的内容)
├── Reports/                # 临时报告（新建）
│   ├── Day6完成状态报告_2026-02-07.md
│   ├── 进度追踪_2026-02-07.md
│   └── (其他临时报告)
├── Final/                  # 终稿（新建）
│   └── (完成的论文版本)
└── Archive/                # 归档（可选）
    └── (过期的临时报告)
```

**命名规范**：
```
Drafts/   → Draft-YYYYMMDD-描述.md
Reports/  → Report-YYYYMMDD-描述.md
Final/    → Final-YYYYMMDD-版本号.md
```

---

## 三、阶段二：结构优化（Week 2-3）

### 3.1 Skills 集中管理

| 属性 | 详情 |
|------|------|
| **优先级** | P1 |
| **收益** | 触发统一，维护方便 |
| **成本** | 1 小时 |
| **风险** | 低 |

**新结构**：
```
提示词助手/
├── Skills/
│   ├── 复盘类/
│   │   ├── 今日复盘.md              ✅ 从根目录迁移
│   │   ├── 周复盘.md                ✅ 新建
│   │   └── 月复盘.md                ✅ 新建
│   ├── 论文类/
│   │   └── 读论文.md                ✅ 新建
│   ├── 项目类/
│   │   └── 项目管理.md              ✅ 新建
│   ├── 竞赛类/
│   │   └── 竞赛准备.md              ✅ 新建
│   ├── 备考类/
│   │   └── 教资通关官.md            ✅ 已有，迁移
│   └── 工具类/
│       ├── Git提交助手.md           ✅ 已有，保持
│       └── 软著申请专家.md          ✅ 已有，保持
└── 提示词/
    └── (通用提示词模板)
```

### 3.2 创建导航文件

| 属性 | 详情 |
|------|------|
| **优先级** | P2 |
| **收益** | 快速定位内容，降低学习成本 |
| **成本** | 1 小时 |
| **风险** | 无 |

**INDEX.md 结构**：
```markdown
# Leo 知识库导航

## 快速开始

### 我要...

| 需求 | 跳转 |
|------|------|
| 写日记 | [[01-Daily]] 或使用「今日复盘」 |
| 读论文 | [[02-Thesis]] 或使用「读论文」 |
| 查看项目进度 | [[03-Projects]] 或使用「项目管理」 |
| 备考教资 | [[06-Growth/Education]] 或使用「教资」 |
| 竞赛准备 | [[04-Competitions]] 或使用「竞赛」 |

## 目录地图

详见 [[MOC-ROOT]]

## 最近更新

(自动列出最近修改的文件)
```

---

## 四、阶段三：内容增强（Week 4-6）

### 4.1 自动链接规则

| 属性 | 详情 |
|------|------|
| **优先级** | P1 |
| **收益** | 链接密度 6.1% → 30% |
| **成本** | 通过 Skills 自动实现 |
| **风险** | 无 |

**关键词映射表**（在 Skills 中实现）：

```markdown
| 关键词触发 | 自动链接目标 | 适用场景 |
|-----------|-------------|----------|
| 论文/文献/baseline/实验/写作 | [[02-Thesis/MOC-论文地图]] | 日记、周复盘 |
| 教资/备考/科目一/综合素质 | [[06-Growth/Education/12周计划]] | 日记、复盘 |
| 50所/路灯/违建/道路病害 | [[03-Projects/中电科50所]] | 项目讨论 |
| 竞赛/美赛/建模/获奖 | [[04-Competitions/MOC-竞赛地图]] | 日记、总结 |
| Claude/Code/AI/Opus | [[05-Tech/Tools/Claude-Code/使用心得]] | 技术讨论 |
| 体重/运动/减肥/健康 | [[06-Growth/Health/体重管理]] | 健康记录 |
```

### 4.2 P0 Skills 创建

| Skill | 触发词 | 功能 | 优先级 |
|-------|--------|------|--------|
| 周复盘助手 | 本周复盘/周复盘 | 汇总本周日记，生成报告 | P0 |
| 读论文助手 | 读论文/论文笔记 | 创建文献笔记，自动关联 | P0 |

---

## 五、阶段四：智能升级（Week 7-10，可选）

### 5.1 MCP 集成方案

| MCP 服务 | 功能 | 优先级 | 成本 |
|----------|------|--------|------|
| **Filesystem MCP** | 本地文件操作 | P0 | 免费 |
| **Memory MCP** | 跨会话记忆存储 | P0 | 免费 |
| **SQLite MCP** | 复盘数据统计 | P1 | 免费 |
| **Brave Search MCP** | 论文搜索 | P1 | 免费 |

**成本控制**：全部免费，零额外成本

---

## 六、验收标准

| 指标 | 当前值 | 目标值 | 验证方式 |
|------|--------|--------|---------|
| 知识库大小 | 33GB | <500MB | `du -sh E:/000/knowledge` |
| 链接密度 | 6.1% | 30% | `find . -name "*.md" -exec grep -l "\[\[" {} \; \| wc -l` |
| Markdown 文件数 | 379 | ~400 | `find . -name "*.md" \| wc -l` |
| 总文件数 | 100,000+ | <500 | `find . -type f \| wc -l` |

---

## 七、执行清单

### Week 1 执行清单

**Day 1-2：数据集与代码分离**
- [ ] 创建 `E:/000/datasets/` 目录
- [ ] 移动 `02-Thesis/Experiments/Dataset-for-illegal-buildings-detection-from-satellite/`
- [ ] 创建 `E:/000/projects-code/` 目录
- [ ] 移动 `03-Projects/` 中的代码目录
- [ ] 移动 `04-Competitions/` 中的完整项目代码
- [ ] 创建 `08-Projects-Code/PROJECTS-ALIAS.md` 映射文件
- [ ] 更新相关 `claude.md` 配置

**Day 3：Writing 目录重组**
- [ ] 创建 `Drafts/`, `Reports/`, `Final/` 目录
- [ ] 移动现有文件到对应目录
- [ ] 删除过期的临时报告

**Day 4-5：验证与清理**
- [ ] 验证知识库大小 <500MB
- [ ] 测试代码映射文件链接
- [ ] Git 提交变更

### Week 2-3 执行清单

- [ ] 创建 `提示词助手/Skills/` 目录结构
- [ ] 新建 `周复盘.md` Skill
- [ ] 新建 `读论文.md` Skill
- [ ] 迁移现有 Skills 到新目录
- [ ] 更新主配置 `CLAUDE.md`
- [ ] 创建 `INDEX.md` 导航文件

### Week 4-6 执行清单

- [ ] 在 Skills 中实现自动链接规则
- [ ] 创建 `MOC-ROOT.md` 全局地图
- [ ] 建立每周 Inbox 清理提醒

---

## 八、风险应对

| 风险 | 应对措施 |
|------|----------|
| 代码分离后难以定位 | PROJECTS-ALIAS.md 作为单一映射点，在知识库文档中添加链接 |
| 数据集路径变化导致实验失败 | 创建数据集说明文档，记录新路径配置方法 |
| 迁移过程意外中断 | 分批迁移，每批完成后 Git 提交 |
| Skills 迁移导致触发失败 | 保留旧文件作为备份，逐步切换 |

---

## 九、成功指标

### 短期指标（Week 1 结束）
- ✅ 知识库大小 <1GB
- ✅ Git 状态显示文件数 <1000
- ✅ 所有代码可通过映射文件定位

### 中期指标（Week 3 结束）
- ✅ Skills 响应率 >90%
- ✅ 新建导航文件可正常访问
- ✅ Writing 目录结构清晰

### 长期指标（Week 6 结束）
- ✅ 链接密度 >25%
- ✅ Inbox 每周清理
- ✅ 用户满意度提升

---

> 本方案由优化架构师基于架构分析师报告设计
> 制定日期：2026-02-08
> 版本：v1.0
