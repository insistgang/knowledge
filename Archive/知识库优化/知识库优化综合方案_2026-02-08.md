# Leo 知识库优化综合方案

> 制定日期：2026-02-08
> 制定方式：Agent Team 协作分析
> 团队：knowledge-architects

---

## 执行摘要

经过 3 位 Agent 专家的深入分析和互相 challenge，为 Leo 的 Obsidian 知识库制定了完整的优化方案。

**核心发现**：
- 知识库综合评分：70/100 (B级)
- 主要问题：代码混存导致 33GB 膨胀、双向链接密度仅 5.7%
- 优化潜力巨大，预计可降至 500MB 级别

**优化策略**：
1. 代码与知识分离
2. 目录结构精简
3. Skills 体系重构
4. MCP 服务集成

---

## 一、知识库体检报告

### 1.1 整体评分

| 维度 | 得分 | 评价 |
|------|------|------|
| 结构清晰度 | 85/100 | 良好 |
| 配置完整性 | 95/100 | 优秀 |
| 命名规范性 | 70/100 | 中等 |
| 内容关联性 | 45/100 | 较弱 ⚠️ |
| 存储效率 | 55/100 | 待优化 ⚠️ |
| **综合评分** | **70/100** | **B级** |

### 1.2 核心数据

| 指标 | 数值 |
|------|------|
| Markdown 文件 | 366 个 |
| 总存储空间 | 33.7 GB |
| 双向链接 | 99 处 (5.7% 使用率) |
| 模块配置覆盖 | 100% (15/15) |
| 模板文件 | 7 个 |

### 1.3 主要问题

| 优先级 | 问题 | 影响 |
|--------|------|------|
| P0 | 代码与知识混存 | 知识库 33GB，Git 性能差 |
| P0 | 双向链接密度低 | 知识孤岛，关联弱 |
| P1 | Writing 目录混乱 | 临时报告堆积 |
| P1 | 外部项目混入 | 概念边界模糊 |

---

## 二、最优目录结构设计

### 2.1 精简后的核心结构

```
knowledge/                           # 知识库（纯知识）
├── 00-Inbox/                        # 快速捕获
├── 01-Daily/                        # 每日复盘
│   ├── YYYY-MM/                     # 按月归档
│   └── Templates/                   # 复盘模板
├── 02-Thesis/                       # 论文核心
│   ├── Literature/                  # 文献笔记
│   ├── Experiments/                 # 实验记录
│   ├── Writing/                     # 论文撰写
│   │   ├── Drafts/                  # 初稿
│   │   ├── Reports/                 # 临时报告
│   │   └── Final/                   # 终稿
│   └── MOC-论文地图.md              # 总入口
├── 03-Projects/                     # 项目文档（仅文档）
├── 04-Competitions/                 # 竞赛知识（仅笔记）
├── 05-Tech/                         # 技术知识库
├── 06-Growth/                       # 个人成长
├── 07-Resources/                    # 资源汇总
├── 08-Projects-Code/                # 项目代码映射（新增）
│   └── PROJECTS-ALIAS.md            # 代码位置映射
├── 提示词助手/
│   └── Skills/                      # Skills 集中管理
├── INDEX.md                         # 知识库导航（新增）
├── MOC-ROOT.md                      # 全局地图（新增）
└── CLAUDE.md                        # 主配置
```

### 2.2 代码分离方案

```
外部代码仓库（独立 Git）
E:/000/projects-code/
├── 50所-路灯检测/
├── 电信-城市监测/
├── 竞赛-华为杯AI/
└── 竞赛-智慧城市/
```

**预期效果**：知识库从 33GB 降至 ~500MB

---

## 三、Skills 体系重构

### 3.1 Skills 集中管理

```
提示词助手/
├── Skills/
│   ├── 复盘类/
│   │   ├── 今日复盘.md ✅
│   │   ├── 周复盘.md ✅ 新建
│   │   └── 月复盘.md ✅ 新建
│   ├── 论文类/
│   │   └── 读论文.md ✅ 新建
│   ├── 项目类/
│   │   └── 项目管理.md ✅ 新建
│   ├── 竞赛类/
│   │   └── 竞赛准备.md ✅ 新建
│   ├── 备考类/
│   │   └── 教资通关官.md ✅ 已有
│   ├── 财务类/
│   │   └── 财务复盘.md ✅ 已有
│   └── 工具类/
│       ├── Git提交助手.md ✅ 已有
│       └── 软著申请专家.md ✅ 已有
```

### 3.2 技能触发词统一

| 触发词 | Skill | 输出 |
|-------|-------|------|
| 今日复盘/写日记 | 今日复盘 | 日记 + Hexo同步 |
| 本周复盘/周复盘 | 周复盘 | 周复盘报告 |
| 本月复盘/月复盘 | 月复盘 | 月度报告 |
| 读论文/论文笔记 | 读论文 | 文献笔记 |
| 项目/50所/电信 | 项目管理 | 项目状态 |
| 竞赛/美赛/建模 | 竞赛准备 | 竞赛材料 |
| 教资/备考 | 教资通关官 | 学习进度 |
| 记账/理财 | 财务复盘 | 财务分析 |
| commit/提交 | Git提交助手 | 提交信息 |
| 软著/软件著作权 | 软著申请专家 | 申请材料 |

---

## 四、MCP 服务集成方案

### 4.1 必需型服务（P0）

| MCP 服务 | 功能 | 成本 |
|----------|------|------|
| **Filesystem MCP** | 本地文件操作 | 免费 |
| **Memory MCP** | 跨会话记忆 | 免费 |
| **SQLite MCP** | 数据统计/复盘 | 免费 |
| **GitHub MCP** | 项目代码管理 | 免费 |
| **Brave Search MCP** | 论文搜索 | 免费 |

### 4.2 Skills-MCP 集成映射

| Skill | 必需 MCP | 数据流 |
|-------|----------|--------|
| 读论文 | Brave Search + Filesystem + Google Drive | 搜索 → 下载 → 解析 → 笔记 |
| 今日复盘 | Filesystem + Memory + Time | 读取 → 整理 → 保存 → 记忆 |
| 周复盘 | Filesystem + Memory + SQLite + Time | 汇总 → 统计 → 分析 → 报告 |
| 项目管理 | GitHub + Filesystem + SQLite | 检索 → 更新 → 记录 |

### 4.3 MCP 配置示例

```json
{
  "mcpServers": {
    "filesystem": {
      "command": "npx",
      "args": ["-y", "@modelcontextprotocol/server-filesystem", "E:\\000\\knowledge"],
      "env": {
        "ALLOWED_DIRECTORIES": "E:\\000\\knowledge;E:\\000\\Hexo\\source\\_posts"
      }
    },
    "memory": {
      "command": "npx",
      "args": ["-y", "@modelcontextprotocol/server-memory"],
      "env": {
        "MEMORY_FILE": "E:\\000\\knowledge\\.claude\\memory.json"
      }
    },
    "sqlite": {
      "command": "npx",
      "args": ["-y", "@modelcontextprotocol/server-sqlite", "E:\\000\\knowledge\\.claude\\habits.db"]
    },
    "github": {
      "command": "npx",
      "args": ["-y", "@modelcontextprotocol/server-github"],
      "env": {
        "GITHUB_TOKEN": "YOUR_TOKEN"
      }
    },
    "brave-search": {
      "command": "npx",
      "args": ["-y", "@modelcontextprotocol/server-brave-search"],
      "env": {
        "BRAVE_API_KEY": "YOUR_KEY"
      }
    }
  }
}
```

---

## 五、知识关联系统

### 5.1 双向链接自动化规则

| 关键词触发 | 自动链接目标 |
|-----------|-------------|
| 论文/文献/实验/baseline | [[MOC-论文地图]] |
| 教资/备考/科目一 | [[06-Growth/Education/12周计划]] |
| 50所/路灯/违建 | [[03-Projects/中电科50所]] |
| 竞赛/美赛/建模 | [[MOC-竞赛地图]] |
| Claude/Code/AI/Opus | [[05-Tech/Tools/Claude-Code/使用心得]] |

**目标**：链接密度从 5.7% 提升至 30%

### 5.2 MOC 体系

```
MOC-ROOT.md（全局地图）
├── MOC-论文地图（31篇文献索引）
├── MOC-竞赛地图（竞赛荣誉与经验）
├── MOC-技术栈（技术知识总览）
├── 03-Projects（项目索引）
└── 08-Projects-Code/PROJECTS-ALIAS（代码映射）
```

---

## 六、实施路线图

### 阶段一：紧急修复（1周内）⚡

**目标**：解决最紧迫的问题

- [ ] **代码分离**：将 04-Competitions 和 03-Projects 中的代码移至外部
- [ ] **创建映射文件**：08-Projects-Code/PROJECTS-ALIAS.md
- [ ] **Writing 清理**：重组 02-Thesis/Writing/ 目录结构
- [ ] **模板统一**：删除冗余模板

**预期效果**：知识库从 33GB 降至 ~500MB

### 阶段二：结构优化（2-3周）

- [ ] **Skills 重构**：创建 Skills/ 目录，迁移现有 skills
- [ ] **创建导航文件**：INDEX.md、MOC-ROOT.md
- [ ] **更新配置**：所有 claude.md 路径更新
- [ ] **新建 P0 Skills**：周复盘、读论文

**预期效果**：工作流自动化，Skills 触发统一

### 阶段三：MCP 集成（4周）

- [ ] **第1周**：安装 Filesystem、Memory、GitHub MCP
- [ ] **第2周**：安装 SQLite MCP，建立习惯追踪
- [ ] **第3周**：安装 Brave Search MCP
- [ ] **第4周**：云服务集成（可选）

**预期效果**：智能辅助增强，数据自动积累

### 阶段四：内容提升（持续）

- [ ] **链接建设**：逐步增加双向链接
- [ ] **标签规范化**：统一标签格式
- [ ] **Inbox 清理自动化**：周复盘时自动检查

**预期效果**：知识关联密度提升，检索效率提高

---

## 七、成功指标

| 指标 | 当前值 | 目标值 | 验证方式 |
|------|-------|-------|---------|
| 知识库大小 | 33GB | <1GB | du -sh |
| 链接密度 | 5.7% | 30% | grep '\[\[' |
| Inbox 清理 | 不定期 | 每周 | ls -lt |
| Skills 响应率 | 60% | 95% | 触发测试 |

---

## 八、Agent Team 观点汇总

### 架构分析师观点

> "代码与知识混存是最大问题。33GB 的知识库中，大部分是项目代码和训练数据，这违背了知识库的初衷。建议优先执行代码分离。"

### 系统设计师观点

> "目录层级过深（5层+）影响导航效率。建议精简至最大 3 层，合并相似模块。Skills 体系需要集中管理，避免分散。"

### MCP 集成专家观点

> "MCP 服务能大幅增强自动化能力，但需要注意成本和稳定性。建议优先集成免费的本地型 MCP（Filesystem、Memory、SQLite），谨慎选择云端服务。"

### 团队共识

1. **代码分离是 P0 优先级** - 必须首先执行
2. **Skills 集中管理** - 提高可维护性
3. **MCP 按需集成** - 免费优先，降级兜底
4. **链接密度提升** - 长期目标，分步实施

---

## 九、挑战与应对

| 挑战 | 应对措施 |
|------|----------|
| 代码分离后的同步成本 | PROJECTS-ALIAS.md 作为单一映射点 |
| Skills 维护工作量 | 采用模板化，减少定制 |
| MCP 调用失败风险 | 实现降级机制，内置工具兜底 |
| 链接建设繁琐 | 通过 Skills 自动添加关键词链接 |
| 用户习惯改变 | 保持日记.md 快速入口，渐进式迁移 |

---

## 十、附录

### A. 生成的报告文件

| 报告 | 位置 |
|------|------|
| 知识库架构分析报告 | `00-Inbox/知识库架构分析报告_2026-02-08.md` |
| 知识库最优模式设计 | `00-Inbox/知识库最优模式设计方案_2026-02-08.md` |
| MCP 集成方案 | `00-Inbox/MCP集成方案_2026-02-08.md` |
| 综合方案（本文件） | `00-Inbox/知识库优化综合方案_2026-02-08.md` |

### B. 新建的 Skills 文件

| Skill | 位置 |
|-------|------|
| 周复盘助手 | `01-Daily/周复盘skill.md` |
| 读论文助手 | `02-Thesis/读论文skill.md` |
| 月复盘助手 | `01-Daily/月复盘skill.md` |
| 项目管理助手 | `03-Projects/项目管理skill.md` |
| 竞赛准备助手 | `04-Competitions/竞赛准备skill.md` |

### C. 参考资料

- [MCP 官方文档](https://modelcontextprotocol.io/)
- [Awesome MCP Servers](https://github.com/wong2/awesome-mcp-servers)
- [Obsidian 官方文档](https://help.obsidian.md/)

---

> 本方案由 knowledge-architects Agent Team 协作制定
> 团队成员：架构分析师、系统设计师、MCP 集成专家
> 制定日期：2026-02-08
