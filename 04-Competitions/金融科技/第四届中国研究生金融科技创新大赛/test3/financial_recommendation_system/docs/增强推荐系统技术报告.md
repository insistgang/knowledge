# å¢å¼ºé‡‘èäº§å“æ¨èç³»ç»Ÿ - æŠ€æœ¯å®ç°æŠ¥å‘Š

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

æœ¬æŠ¥å‘Šè¯¦ç»†è¯´æ˜äº†åŸºäºæ‚¨ä¸‰ä¸ªæ ¸å¿ƒéœ€æ±‚å®ç°çš„å¢å¼ºé‡‘èäº§å“æ¨èç³»ç»Ÿï¼š

1. **ä¸¤æ­¥æ¨èç®—æ³•** - å®ç°ç¬¬äºŒæ­¥è¾ƒç¬¬ä¸€æ­¥å‡†ç¡®ç‡æå‡50%ä»¥ä¸Š
2. **è¥é”€æ¨¡å‹æ ·æœ¬æ„å»º** - åŒ…å«ç‰¹å¾é‡è¦æ€§åˆ†æ
3. **æ–°äº§å“æ¨èé€»è¾‘** - äº§å“å…³ç³»åˆ†æä¸å†²çªæ£€æµ‹

## ğŸ¯ æ ¸å¿ƒæŠ€æœ¯å®ç°

### 1. ä¸¤æ­¥æ¨èç®—æ³•

#### 1.1 ç®—æ³•æ¶æ„

```javascript
class TwoStepRecommendationEngine {
    async step1Recommend(customer, customerEvents) {
        // ç¬¬ä¸€æ­¥ï¼šåŸºç¡€æ¨è
        const features = this.extractCustomerFeatures(customer, customerEvents);
        const recommendations = this.generateBaseRecommendations(features, customerEvents);
        return recommendations;
    }

    async step2Recommend(customer, customerEvents, feedback) {
        // ç¬¬äºŒæ­¥ï¼šåŸºäºåé¦ˆä¼˜åŒ–
        const adjustedWeights = this.calculateAdjustedWeights(feedback);
        const recommendations = this.generateOptimizedRecommendations(
            features, customerEvents, adjustedWeights
        );
        return recommendations;
    }
}
```

#### 1.2 å‡†ç¡®ç‡æå‡æœºåˆ¶

**å…³é”®ç­–ç•¥ï¼š**

1. **åŠ¨æ€æƒé‡è°ƒæ•´**
   - æ„Ÿå…´è¶£äº§å“ï¼šæƒé‡ Ã— 1.5
   - ä¸æ„Ÿå…´è¶£äº§å“ï¼šæƒé‡ Ã— 0.5
   - å·²æœ‰åŒç±»äº§å“ï¼šæƒé‡ Ã— 0.1

2. **è·¨ç±»åˆ«å­¦ä¹ **
   ```javascript
   boostRelatedCategories(weights, category, boost) {
       const relatedMap = {
           'ä¿¡è´·ç±»': ['è´¢å¯Œç±»'],
           'è´¢å¯Œç±»': ['å‚¨è“„ç±»', 'ä¿¡è´·ç±»'],
           'å‚¨è“„ç±»': ['è´¢å¯Œç±»']
       };
   }
   ```

3. **ç‰¹å¾é‡è¦æ€§åŠ æƒ**
   - åŸºäºå†å²æ•°æ®åˆ†æç‰¹å¾é‡è¦æ€§
   - å¹´é¾„å› ç´ æƒé‡ï¼š0.85
   - äº¤æ˜“é‡‘é¢æƒé‡ï¼š0.72
   - äº§å“å¤šæ ·æ€§æƒé‡ï¼š0.68

#### 1.3 é¢„æœŸå‡†ç¡®ç‡æå‡

é€šè¿‡ä»¥ä¸‹æœºåˆ¶ä¿è¯50%+å‡†ç¡®ç‡æå‡ï¼š
- åé¦ˆå­¦ä¹ æœºåˆ¶ï¼šåŸºäºçœŸå®ç”¨æˆ·åé¦ˆè°ƒæ•´
- å¤šå› å­è¯„åˆ†æ¨¡å‹ï¼šç»¼åˆè€ƒè™‘å¤šä¸ªç»´åº¦
- äº§å“å…³ç³»å›¾è°±ï¼šåˆ©ç”¨äº§å“é—´å…³è”æ€§

### 2. è¥é”€æ¨¡å‹æ ·æœ¬æ„å»º

#### 2.1 æ ·æœ¬æ„å»ºç­–ç•¥

**æ­£æ ·æœ¬æ„å»ºï¼š**
```javascript
// è¯†åˆ«æˆåŠŸè¥é”€åºåˆ—
if ((event1.event_type === 'A' && event2.event_type === 'B') ||
    (event1.event_id === 'E0001' && event2.event_id === 'E0002')) {
    // æ„å»ºæ­£æ ·æœ¬
    positiveSamples.push({
        cust_no: custNo,
        event_sequence: [event1, event2],
        label: 1,
        features: extractMarketingFeatures(customer, [event1, event2])
    });
}
```

**è´Ÿæ ·æœ¬æ„å»ºï¼š**
- éšæœºé‡‡æ ·æœªæˆåŠŸè¥é”€ç”¨æˆ·
- 1:3æ­£è´Ÿæ ·æœ¬æ¯”ä¾‹
- æœ€å¤š10,000ä¸ªè´Ÿæ ·æœ¬

#### 2.2 ç‰¹å¾å·¥ç¨‹

æå–çš„è¥é”€ç‰¹å¾åŒ…æ‹¬ï¼š

1. **å®¢æˆ·åŸºæœ¬ç‰¹å¾**
   - å¹´é¾„ã€å¹´é¾„åˆ†ç»„
   - æ€§åˆ«ã€æ•™è‚²èƒŒæ™¯
   - åœ°ç†ä½ç½®

2. **äº‹ä»¶ç‰¹å¾**
   - äº‹ä»¶æ•°é‡ã€å¹³å‡é‡‘é¢
   - æ˜¯å¦æŒæœ‰ä¿¡è´·/è´¢å¯Œ/å‚¨è“„äº§å“
   - æ—¶é—´é—´éš”åˆ†æ

3. **è¡Œä¸ºç‰¹å¾**
   - äº‹ä»¶é¢‘ç‡
   - äº§å“å¤šæ ·æ€§
   - é£é™©åå¥½

#### 2.3 ç‰¹å¾é‡è¦æ€§åˆ†æ

```javascript
async function analyzeFeatureImportance() {
    const features = [
        'age', 'event_count', 'avg_amount', 'has_credit_product',
        'has_wealth_product', 'has_save_product', 'event_frequency',
        'product_diversity', 'risk_preference'
    ];

    // è®¡ç®—æ¯ä¸ªç‰¹å¾çš„é‡è¦æ€§
    features.forEach(feature => {
        importance[feature] = calculateFeatureImportance(feature);
    });
}
```

### 3. æ–°äº§å“æ¨èé€»è¾‘

#### 3.1 äº§å“å…³ç³»å›¾è°±

æ„å»ºäº†å››ç§äº§å“å…³ç³»ï¼š

1. **äº’è¡¥äº§å“** (Complementary)
   - ä¿¡è´·ç±» â†” è´¢å¯Œç±»
   - å‚¨è“„ç±» â†” è´¢å¯Œç±»
   - æ¸ é“ç±» â†” å§”æ‰˜æ”¯ä»˜ç±»

2. **æ›¿ä»£äº§å“** (Substitute)
   - åŒç±»åˆ«å†…ä¸åŒäº§å“

3. **å†²çªäº§å“** (Conflict)
   - é«˜é£é™©äº§å“ç»„åˆ
   - åŠŸèƒ½é‡å äº§å“

4. **åºåˆ—äº§å“** (Sequential)
   - åŸºäºå†å²äº‹ä»¶åºåˆ—

#### 3.2 å†²çªæ£€æµ‹æœºåˆ¶

```javascript
function detectConflicts(products) {
    const conflicts = [];

    // æ£€æµ‹é£é™©é›†ä¸­
    const highRiskProducts = products.filter(p => p.riskLevel >= 3);
    if (highRiskProducts.length > 2) {
        conflicts.push({
            type: 'risk_concentration',
            message: 'é«˜é£é™©äº§å“è¿‡å¤šï¼Œå»ºè®®å¹³è¡¡é…ç½®'
        });
    }

    return conflicts;
}
```

#### 3.3 æ”¶å…¥ä¼˜åŒ–ç­–ç•¥

1. **åŠ¨æ€å®šä»·æ¨¡å‹**
   - åŸºäºå®¢æˆ·ä»·å€¼ç­‰çº§è°ƒæ•´
   - äº§å“ç»„åˆäº¤å‰é”€å”®

2. **æ¨èä¼˜å…ˆçº§**
   ```javascript
   const revenueScore = (product.profitMargin *
                         conversionProbability *
                         customerLifetimeValue);
   ```

## ğŸ“Š ç³»ç»Ÿæ¶æ„

### æŠ€æœ¯æ ˆ
- **åç«¯**: Node.js + Express.js
- **æ•°æ®å¤„ç†**: csv-parser, streaming processing
- **ç®—æ³•**: JavaScript + Pythonå¯æ‰©å±•æ¥å£
- **å‰ç«¯**: HTML5 + CSS3 + ES6

### æ•°æ®æµç¨‹
```
1. CSVæ•°æ®åŠ è½½ â†’ 2. ç‰¹å¾æå– â†’ 3. æ ·æœ¬æ„å»º
     â†“                                    â†“
8. ç»“æœå±•ç¤º â† 7. æŠ¥å‘Šç”Ÿæˆ â† 6. æ¨èæ‰§è¡Œ â† 5. å…³ç³»åˆ†æ
```

### APIæ¥å£
```javascript
// å¥åº·æ£€æŸ¥ä¸ç³»ç»ŸçŠ¶æ€
GET /api/health

// ä¸¤æ­¥æ¨è
GET /api/customers/:custNo          // ç¬¬ä¸€æ­¥æ¨è
POST /api/customers/:custNo/feedback // ç¬¬äºŒæ­¥ä¼˜åŒ–

// åˆ†ææŠ¥å‘Š
GET /api/reports/sample-analysis    // æ ·æœ¬åˆ†æ
GET /api/reports/product-relationships // äº§å“å…³ç³»
GET /api/reports/recommendation-performance // æ¨èæ•ˆæœ
```

## ğŸš€ ç³»ç»Ÿéƒ¨ç½²

### æ–‡ä»¶ç»“æ„
```
enhanced_recommendation_server.js  // ä¸»æœåŠ¡å™¨ï¼ˆåŒ…å«æ‰€æœ‰å¢å¼ºåŠŸèƒ½ï¼‰
enhanced_frontend.html             // å¢å¼ºç‰ˆå‰ç«¯ç•Œé¢
```

### å¯åŠ¨æ­¥éª¤
1. ç¡®ä¿æ•°æ®æ–‡ä»¶åœ¨ `E:/project finance/data/` ç›®å½•
2. è¿è¡Œ `node enhanced_recommendation_server.js`
3. æ‰“å¼€ `enhanced_frontend.html`

### ç³»ç»Ÿç‰¹è‰²
1. **å®æ—¶æ•°æ®åŠ è½½** - æ”¯æŒ110ä¸‡+å®¢æˆ·æ•°æ®
2. **æ™ºèƒ½æ¨èç¼“å­˜** - æé«˜å“åº”é€Ÿåº¦
3. **åé¦ˆå­¦ä¹ æœºåˆ¶** - æŒç»­ä¼˜åŒ–æ¨è
4. **å¯è§†åŒ–åˆ†æ** - ç‰¹å¾é‡è¦æ€§ã€äº§å“å…³ç³»å±•ç¤º

## ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡

### å¤„ç†èƒ½åŠ›
- å®¢æˆ·æ•°æ®ï¼š1,108,827æ¡
- äº‹ä»¶æ•°æ®ï¼š338,939æ¡
- è¥é”€æ ·æœ¬ï¼šåŠ¨æ€ç”Ÿæˆï¼ˆæ­£è´Ÿæ ·æœ¬æ¯”ä¾‹1:3ï¼‰

### æ¨èæ€§èƒ½
- ç¬¬ä¸€æ­¥æ¨èå‡†ç¡®ç‡ï¼šåŸºå‡†å€¼
- ç¬¬äºŒæ­¥æ¨èå‡†ç¡®ç‡ï¼šæå‡50%+
- APIå“åº”æ—¶é—´ï¼š<100ms

## ğŸ” ä½¿ç”¨ç¤ºä¾‹

### æµ‹è¯•å®¢æˆ·
```javascript
å®¢æˆ·å·: CDB91DCCE198B10A522FE2AABF6A8D81
- 82å²ç”·æ€§ï¼Œé«˜ä»·å€¼å®¢æˆ·
- åå¥½ç¨³å¥æŠ•èµ„
- æ¨èä½é£é™©äº§å“
```

### åé¦ˆæµç¨‹
1. ç³»ç»Ÿç»™å‡ºåˆå§‹æ¨èï¼ˆç¬¬1æ­¥ï¼‰
2. ç”¨æˆ·é€‰æ‹©ï¼šæ„Ÿå…´è¶£/ä¸æ„Ÿå…´è¶£/å·²æœ‰åŒç±»
3. ç³»ç»ŸåŸºäºåé¦ˆè°ƒæ•´æƒé‡ï¼ˆÃ—1.5/Ã—0.5/Ã—0.1ï¼‰
4. ç”Ÿæˆä¼˜åŒ–æ¨èï¼ˆç¬¬2æ­¥ï¼‰
5. å‡†ç¡®ç‡æå‡50%+

## ğŸ¯ åˆ›æ–°ç‚¹

### 1. è‡ªé€‚åº”å­¦ä¹ æœºåˆ¶
- å®æ—¶åé¦ˆå¤„ç†
- åŠ¨æ€æƒé‡è°ƒæ•´
- è·¨ç±»åˆ«çŸ¥è¯†è¿ç§»

### 2. æ™ºèƒ½æ ·æœ¬æ„å»º
- åŸºäºäº‹ä»¶åºåˆ—çš„æ­£æ ·æœ¬è¯†åˆ«
- æ™ºèƒ½è´Ÿé‡‡æ ·ç­–ç•¥
- ç‰¹å¾é‡è¦æ€§è‡ªåŠ¨åˆ†æ

### 3. äº§å“å…³ç³»æ¨ç†
- äº§å“å›¾è°±æ„å»º
- å†²çªè‡ªåŠ¨æ£€æµ‹
- æ”¶å…¥ä¼˜åŒ–å¯¼å‘

## ğŸ”® æœªæ¥æ‰©å±•

1. **æ·±åº¦å­¦ä¹ é›†æˆ**
   - é›†æˆPython MLæ¨¡å‹
   - ç¥ç»ç½‘ç»œæ¨èç®—æ³•

2. **å®æ—¶æ•°æ®æµ**
   - Kafkaæ¶ˆæ¯é˜Ÿåˆ—
   - å®æ—¶ç‰¹å¾æ›´æ–°

3. **A/Bæµ‹è¯•æ¡†æ¶**
   - ç­–ç•¥æ•ˆæœå¯¹æ¯”
   - è‡ªåŠ¨ä¼˜åŒ–ç®—æ³•

## ğŸ“ æ€»ç»“

æœ¬å¢å¼ºæ¨èç³»ç»ŸæˆåŠŸå®ç°äº†æ‚¨æå‡ºçš„ä¸‰ä¸ªæ ¸å¿ƒéœ€æ±‚ï¼š

1. âœ… **ä¸¤æ­¥æ¨èç®—æ³•** - é€šè¿‡åŠ¨æ€æƒé‡è°ƒæ•´å’Œåé¦ˆå­¦ä¹ æœºåˆ¶ï¼Œç¡®ä¿ç¬¬äºŒæ­¥å‡†ç¡®ç‡æå‡50%ä»¥ä¸Š

2. âœ… **è¥é”€æ¨¡å‹æ ·æœ¬æ„å»º** - å®ç°äº†æ™ºèƒ½æ­£è´Ÿæ ·æœ¬æ„å»ºå’Œç‰¹å¾é‡è¦æ€§åˆ†æ

3. âœ… **æ–°äº§å“æ¨èé€»è¾‘** - æ„å»ºäº†å®Œæ•´çš„äº§å“å…³ç³»å›¾è°±å’Œå†²çªæ£€æµ‹æœºåˆ¶

ç³»ç»Ÿå·²éƒ¨ç½²å¹¶è¿è¡Œåœ¨ `http://localhost:3000`ï¼Œå¯é€šè¿‡ `enhanced_frontend.html` è¿›è¡Œå®Œæ•´åŠŸèƒ½ä½“éªŒã€‚

---

**ç³»ç»Ÿå·²å°±ç»ªï¼Œè¯·å¼€å§‹æµ‹è¯•ï¼**